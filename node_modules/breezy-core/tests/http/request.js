'use strict'

const requestConfig = {
  Company: {
    HOSTNAME: 'localhost',
    PORT: '8082',
    VERSION: 'v1'
  }
}

const LOG_NS = '[REQUEST_TEST]'

const BreezyRequest = require('../../src/http/request')
const request = new BreezyRequest(requestConfig.Company)

const role = {
  "_id": "cbd5190b4c6d",
  "name": "test",
  "company_id": "e16af8b6eb68",
  "permissions": [
    {
      "_id": "positionAccess",
      "access": {
        "create": true,
        "read": true,
        "update": true,
        "remove": false
      }
    },
    {
      "_id": "userAccess",
      "access": {
        "create": true,
        "read": false,
        "update": true,
        "remove": true
      }
    },
    {
      "_id": "candidateAccess",
      "access": {
        "create": false,
        "read": true,
        "update": true,
        "remove": true
      }
    }
  ],
  "description": 0
}

async function main() {


  let uri = 'company/e16af8b6eb68/roles?acting_user_id=08cf60071ead'


  let response
  try {
    response = await request.get(uri)
  } catch (e) {
  }




  //let response
  try {
    response = await request.post(uri, {body: role})
  } catch (e) {
  }

  let id = response._id


  response.name = 'updated name'

  uri = 'company/e16af8b6eb68/role/' + id + '?acting_user_id=08cf60071ead'

  response = await request.put(uri, {body: response})


  response = await request.get(uri)


  response = await request.del(uri)


}


main().then(() => {
  console.log('Done');
}).catch((e) => {
  console.error(e);
});
