'use strict'

const express = require('express')
const positionRouter = require('../../src/routes/position-routes')
const {companyContext} = require('../middleware/context-manager')

const router = express.Router()
const LOG_NS = '[COMPANY]'
const BASE_PATH = '/company'

router.param('companyId', companyContext())

router.get(BASE_PATH + '/:companyId', getCompany)
router.use(BASE_PATH + '/:companyId', positionRouter)
router.get(BASE_PATH + '/:companyId/new', getCompany)

/**
 * Handle company endpoint
 * @param req
 * @param res
 * @returns {Promise<void>}
 */
async function getCompany(req, res) {

  let companyId = req.params.companyId
  console.log(LOG_NS, 'companyId ' + companyId)
  console.log(LOG_NS, 'Got some company data')
  res.send('Company Stuff');
}

module.exports = router
